(function(t){function e(e){for(var i,a,r=e[0],u=e[1],c=e[2],g=0,f=[];g<r.length;g++)a=r[g],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&f.push(s[a][0]),s[a]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);l&&l(e);while(f.length)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,r=1;r<n.length;r++){var u=n[r];0!==s[u]&&(i=!1)}i&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},s={app:0},o=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],u=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var l=u;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var i=n("8a23"),s=n.n(i);s.a},"30f9":function(t,e,n){"use strict";var i=n("aeba"),s=n.n(i);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("v-app",[n("router-view")],1)],1)},o=[],a=(n("034f"),n("2877")),r=n("6544"),u=n.n(r),c=n("7496"),l={},g=Object(a["a"])(l,s,o,!1,null,null,null),f=g.exports;u()(g,{VApp:c["a"]});var d=n("f309");i["a"].use(d["a"]);var m=new d["a"]({}),v=n("8c4f"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"common-results-page"},[n("Menu"),n("v-card",{staticClass:"page-card"},[n("h3",{staticClass:"greeting"},[t._v("MT-Calculator: Таблица результатов")]),n("CommonResultsTable")],1)],1)},h=[],b=n("5530"),I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{attrs:{absolute:"",permanent:"",dark:"",width:"300"}},[n("v-list-item",[n("v-list-item-avatar",[n("v-icon",[t._v("mdi-menu")])],1),n("v-list-item-title",[t._v("Меню приложения")])],1),n("v-divider"),n("v-list",{attrs:{dense:""}},[n("v-list-item",{attrs:{link:"",to:"/"}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-badge-account-horizontal")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Общие результаты")])],1)],1),t.isLoggedIn?n("v-list-item",{attrs:{link:"",to:"/self-results"}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-chart-bar")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Мои результаты")])],1)],1):t._e(),t.isLoggedIn?n("v-list-item",{attrs:{link:"",to:"/game"}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-chess-queen")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Тренировка")])],1)],1):t._e(),t.isLoggedIn?t._e():n("v-list-item",{staticClass:"login-list-item"},[n("v-list-item-content",[n("v-list-item-title",[t._v("Вход")]),n("v-text-field",{attrs:{label:t.loginLabel,clearable:!0},model:{value:t.loginText,callback:function(e){t.loginText=e},expression:"loginText"}}),n("v-text-field",{attrs:{"append-icon":t.showPassword?"mdi-eye":"mdi-eye-off",rules:[t.rules.required,t.rules.min],type:t.showPassword?"text":"password",label:t.passwordLabel},on:{"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.passwordText,callback:function(e){t.passwordText=e},expression:"passwordText"}}),n("v-btn",{attrs:{color:"success",dark:"",loading:t.isLogging},on:{click:t.loginButtonClick}},[n("v-icon",[t._v("mdi-login-variant")]),t._v(" Войти ")],1)],1)],1),t.isLoggedIn?n("v-list-item",{on:{click:t.logoutMenuItemlick}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-logout-variant")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Выход")])],1)],1):t._e()],1)],1)},L=[],x=n("2f62"),_={name:"app-menu",data:function(){return{loginLabel:"Имя входа",passwordLabel:"Пароль",loginText:"",passwordText:"",showPassword:!1,rules:{required:function(t){return!!t||"Нужно ввести хоть что-то."},min:function(t){return t.length>=8||"Минимум 8 символов"}}}},computed:{isLoggedIn:{get:function(){return this.getIsLoggedIn()}},isLogging:{get:function(){return this.getIsLogging()}}},methods:Object(b["a"])(Object(b["a"])(Object(b["a"])({},Object(x["b"])(["getIsLoggedIn","getIsLogging"])),Object(x["c"])(["login","logout"])),{},{loginButtonClick:function(){var t={login:this.loginText,password:this.passwordText};this.login(t)},logoutMenuItemlick:function(){this.logout()}})},C=_,T=(n("d2cf"),n("8336")),j=n("ce7e"),k=n("132d"),O=n("8860"),w=n("da13"),R=n("8270"),S=n("5d23"),y=n("34c3"),V=n("f774"),P=n("8654"),q=Object(a["a"])(C,I,L,!1,null,"47cf6bee",null),M=q.exports;u()(q,{VBtn:T["a"],VDivider:j["a"],VIcon:k["a"],VList:O["a"],VListItem:w["a"],VListItemAvatar:R["a"],VListItemContent:S["a"],VListItemIcon:y["a"],VListItemTitle:S["b"],VNavigationDrawer:V["a"],VTextField:P["a"]});var E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-data-table",{staticClass:"common-results-tab",attrs:{headers:t.commonResultsTableHeaders,items:t.commonResults,"items-per-page":10,loading:t.isLoading,"footer-props":{disableItemsPerPage:!0,showCurrentPage:!1,itemsPerPageText:"Строк на странице:",pageText:"{0}-{1} из {2}"}}})},$=[],A={name:"common-results-table",data:function(){return{commonResultsTableHeaders:[{text:"Пользователь",value:"Пользователь"},{text:"Последний счет",value:"Счет последний"},{text:"Максимальный счет",value:"Счет максимальный"},{text:"Счет средний за месяц",value:"Счет средний за месяц"}]}},created:function(){this.setCommonResults()},computed:{isLoggedIn:{get:function(){return this.getIsLoogedIn()}},isLoading:{get:function(){return this.getIsLoading()}},commonResults:{get:function(){return this.getCommonResults()}}},methods:Object(b["a"])(Object(b["a"])({},Object(x["b"])(["getIsLoogedIn","getIsLoading","getCommonResults"])),Object(x["c"])(["setCommonResults"]))},B=A,D=(n("9515"),n("8fea")),J=Object(a["a"])(B,E,$,!1,null,"358a4834",null),H=J.exports;u()(J,{VDataTable:D["a"]});var N={name:"common-results",components:{CommonResultsTable:H,Menu:M},data:function(){return{}},created:function(){this.setCommonResults()},computed:{isLoading:{get:function(){return this.getIsLoading()}},commonResults:{get:function(){return this.getCommonResults()}}},methods:Object(b["a"])(Object(b["a"])({},Object(x["b"])(["getIsLoading","getCommonResults"])),Object(x["c"])(["setCommonResults"]))},z=N,F=(n("f1ac"),n("b0af")),G=Object(a["a"])(z,p,h,!1,null,"1c430f9c",null),K=G.exports;u()(G,{VCard:F["a"]});var Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"self-results-page"},[n("Menu"),n("v-card",{staticClass:"page-card"},[n("h3",{staticClass:"greeting"},[t._v("MT-Calculator: Мои результаты")]),n("SelfResultsTable")],1)],1)},U=[],W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-data-table",{staticClass:"self-results-tab",attrs:{headers:t.selfResultsTableHeaders,items:t.selfResults,"items-per-page":10,loading:t.isLoading,"footer-props":{disableItemsPerPage:!0,showCurrentPage:!1,itemsPerPageText:"Строк на странице:",pageText:"{0}-{1} из {2}"}}})},X=[],Y={name:"self-results-table",data:function(){return{selfResultsTableHeaders:[{text:"Дата",value:"Дата"},{text:"Длительность прохождения",value:"Длительность прохождения"},{text:"Всего вопросов",value:"Всего вопросов"},{text:"Количество правильных ответов",value:"Количество правильных ответов"},{text:"Счет",value:"Счет"}]}},created:function(){this.setSelfResults()},computed:{isLoading:{get:function(){return this.getIsLoading()}},selfResults:{get:function(){return this.getSelfResults()}}},methods:Object(b["a"])(Object(b["a"])({},Object(x["b"])(["getIsLoading","getSelfResults"])),Object(x["c"])(["setSelfResults"]))},Z=Y,tt=(n("7be4"),Object(a["a"])(Z,W,X,!1,null,"72c9900c",null)),et=tt.exports;u()(tt,{VDataTable:D["a"]});var nt={name:"self-results",components:{SelfResultsTable:et,Menu:M},data:function(){return{}},created:function(){this.setCommonResults()},computed:{isLoading:{get:function(){return this.getIsLoading()}},commonResults:{get:function(){return this.getCommonResults()}}},methods:Object(b["a"])(Object(b["a"])({},Object(x["b"])(["getIsLoading","getCommonResults"])),Object(x["c"])(["setCommonResults"]))},it=nt,st=(n("585e"),Object(a["a"])(it,Q,U,!1,null,"1962a1f6",null)),ot=st.exports;u()(st,{VCard:F["a"]});var at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"game-page"},[n("Menu"),n("v-card",{staticClass:"page-card"},[n("h3",{staticClass:"greeting"},[t._v("MT-Calculator: Тренировка")]),t.trainingSessionInfo?n("v-list",{style:"background-size: contain; background-image:url("+(t.trainingSessionInfo&&t.trainingSessionInfo.background)+")",attrs:{dense:""}},[t._l(t.trainingSessionInfo.equations,(function(e,i){return n("GameItem",{key:e.id,attrs:{item:e,index:i},on:{"on-change":t.onItemChange}})})),n("v-list-item",[n("v-btn",{attrs:{color:"success",dark:"",loading:t.isChecking},on:{click:t.checkButtonClick}},[n("v-icon",[t._v("mdi-feather")]),t._v(" Отправить на проверку ")],1)],1)],2):t._e()],1)],1)},rt=[],ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-item",[n("v-text-field",{attrs:{type:"number",filled:"",dens:"","hide-details":"",rules:[t.rules.required],label:t.equationText},model:{value:t.equationValue,callback:function(e){t.equationValue=e},expression:"equationValue"}})],1)},ct=[],lt={name:"game-item",props:["item","index"],data:function(){return{rules:{required:function(t){return void 0!==t||"Нужно ввести хоть что-то."}}}},computed:{equationText:{get:function(){return this.item.first_number+("m"===this.item.type?" x ":" / ")+this.item.second_number}},equationValue:{get:function(){return this.item.value||0},set:function(t){this.$emit("on-change",t,this.index)}}}},gt=lt,ft=(n("30f9"),Object(a["a"])(gt,ut,ct,!1,null,"5e40a786",null)),dt=ft.exports;u()(ft,{VListItem:w["a"],VTextField:P["a"]});var mt={name:"game",components:{Menu:M,GameItem:dt},data:function(){return{rules:{required:function(t){return!!t||"Нужно ввести хоть что-то."}}}},created:function(){this.setTrainingSessionInfo()},computed:{isLoading:{get:function(){return this.getIsLoading()}},isChecking:{get:function(){return!1}},trainingSessionInfo:{get:function(){return this.getTrainingSessionInfo()}}},methods:Object(b["a"])(Object(b["a"])(Object(b["a"])({},Object(x["b"])(["getIsLoading","getTrainingSessionInfo"])),Object(x["c"])(["setTrainingSessionInfo","setTrainingAnswer","checkTrainingResults"])),{},{checkButtonClick:function(){this.checkTrainingResults()},onItemChange:function(t,e){this.setTrainingAnswer({value:t,index:e})}})},vt=mt,pt=(n("9b25"),Object(a["a"])(vt,at,rt,!1,null,"46849199",null)),ht=pt.exports;u()(pt,{VBtn:T["a"],VCard:F["a"],VIcon:k["a"],VList:O["a"],VListItem:w["a"]}),i["a"].use(v["a"]);var bt=new v["a"]({mode:"history",base:"/",routes:[{path:"/",name:"common-results",component:K},{path:"/self-results",name:"self-results",component:ot},{path:"/game",name:"game",component:ht}]}),It=(n("4160"),n("159b"),n("d3b7"),function(t,e){return fetch(t,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(t){return t.json()}))}),Lt=function(t,e){var n=xt();return fetch(t,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify(e)}).then((function(t){return t.json()}))},xt=function(){var t=JSON.parse(localStorage.getItem("mtcalctoken"));if(t&&t.access_token&&t.token_expire){var e=new Date,n=new Date(t.token_expire),i=e<n&&t.access_token;return i}return null},_t=function(t){var e,n=xt();return e=n?fetch(t,{method:"get",headers:new Headers({Authorization:"Bearer "+n})}):fetch(t),e.then((function(t){if(!t.ok)throw new Error(t.statusText);return t.json()}))};i["a"].use(x["a"]);var Ct="https://mt-calculator-dashboard.herokuapp.com/api/v1/dashboard/all",Tt="https://mt-calculator-dashboard.herokuapp.com/api/v1/dashboard/self",jt="https://91i.ru/api/v1/start",kt="https://91i.ru/api/v1/end",Ot=new x["a"].Store({state:{isLoggedIn:xt(),isLogging:!1,isLoading:!1,isChecking:!1,currentLogin:"",commonResults:[],selfResults:[],trainingSessionInfo:void 0},getters:{getIsLoggedIn:function(t){return t.isLoggedIn},getIsLogging:function(t){return t.isLogging},getIsLoading:function(t){return t.isLoading},getIsChecking:function(t){return t.isChecking},getCommonResults:function(t){return t.commonResults},getSelfResults:function(t){return t.selfResults},getTrainingSessionInfo:function(t){return t.trainingSessionInfo}},mutations:{setCommonResults:function(t){t.isLoading=!0,_t(Ct).then((function(e){t.commonResults=e,t.isLoading=!1}))},setSelfResults:function(t){t.isLoading=!0,_t(Tt).then((function(e){t.selfResults=e,t.isLoading=!1})).catch((function(){return bt.push("/")}))},setTrainingSessionInfo:function(t){t.trainingSessionInfo&&t.trainingSessionInfo.equations&&t.trainingSessionInfo.equations.length>0||(t.isLoading=!0,_t(jt).then((function(e){t.trainingSessionInfo=e,t.isLoading=!1})).catch((function(){return bt.push("/")})))},setTrainingAnswer:function(t,e){console.log("equation: "+t.trainingSessionInfo.equations[e.index]+", value: "+e.value),t.trainingSessionInfo.equations[e.index].result=e.value},checkTrainingResults:function(t){t.isChecking=!0;var e=t.trainingSessionInfo,n={session_id:e.session_id,equation_results:[]};e.equations.forEach((function(t){return n.equation_results.push({id:t.id,result:"result"in t?parseInt(t.result):-1})})),Lt(kt,n).then((function(e){console.log(e),t.isChecking=!1,t.trainingSessionInfo=void 0,bt.push("/self-results")}))},login:function(t,e){e.loginText!==t.currentLogin&&(t.trainingSessionInfo=void 0),t.currentLogin=void 0,t.isLogging=!0,It("http://91i.ru/api/v1/token",e).then((function(n){t.isLogging=!1,t.isLoggedIn=!0,t.currentLogin=e.loginText,localStorage.setItem("mtcalctoken",JSON.stringify(n))}))},logout:function(t){t.isLoggedIn=!1,localStorage.removeItem("mtcalctoken"),bt.push("/")}}});i["a"].config.productionTip=!1,new i["a"]({router:bt,store:Ot,vuetify:m,render:function(t){return t(f)}}).$mount("#app")},"585e":function(t,e,n){"use strict";var i=n("a91e"),s=n.n(i);s.a},6130:function(t,e,n){},6360:function(t,e,n){},"7be4":function(t,e,n){"use strict";var i=n("6130"),s=n.n(i);s.a},"8a23":function(t,e,n){},9515:function(t,e,n){"use strict";var i=n("b852"),s=n.n(i);s.a},"9b25":function(t,e,n){"use strict";var i=n("cca2"),s=n.n(i);s.a},a91e:function(t,e,n){},aeba:function(t,e,n){},b852:function(t,e,n){},bad2:function(t,e,n){},cca2:function(t,e,n){},d2cf:function(t,e,n){"use strict";var i=n("6360"),s=n.n(i);s.a},f1ac:function(t,e,n){"use strict";var i=n("bad2"),s=n.n(i);s.a}});
//# sourceMappingURL=app.a5b5d86e.js.map